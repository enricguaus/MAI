#N canvas 100 146 1257 654 12;
#X declare -lib ml.lib;
#X declare -lib timbreIDLib;
#X obj 249 191 ml.ann;
#X obj 16 137 declare -lib ml.lib;
#X obj 10 365 r~ \$0-audio;
#X obj 18 412 r \$0-metro;
#X text 8 93 Dependencies;
#X obj 10 463 list split 1;
#X obj 50 534 s \$0-mfcc;
#N canvas 0 22 450 278 (subpatch) 0;
#X array \$0-mfcc 13 float 1;
#A 0 -0.302356 0.241307 0.0789837 -0.135422 -0.0144092 0.0777064 0.028334 0.0187355 0.0177944 0.00748652 0.000997454 -0.0405608 0.0129553;
#X coords 0 1 12 -1 200 70 1 0 0;
#X restore 7 572 graph;
#X obj 17 114 declare -lib timbreIDLib;
#X text 10 7 Enric Guaus;
#X obj 10 246 tabwrite~ audio_in;
#N canvas 179 204 450 278 (subpatch) 0;
#X array audio_in 100 float 3;
#A 0 -0.00108634 -0.00132172 -0.00148471 -0.00155234 -0.00134407 -0.000923361 -0.000144081 0.000476176 0.000409318 -9.58829e-05 -0.000744863 -0.00113996 -0.00101213 -0.00070641 -0.000436998 -0.000144552 -4.26624e-05 0.000183657 0.000387377 -0.000225189 -0.000772835 -0.000463283 0.000190409 0.000799338 0.00121366 0.00106202 0.000116742 -0.000844728 -0.00143456 -0.00153553 -0.00077026 0.000181902 0.000645111 0.000533676 0.000122698 -0.00031032 -0.000818928 -0.00104247 -0.000745465 -0.000109916 0.000625539 0.00121939 0.00139219 0.00109574 0.00100643 0.00111908 0.00082443 0.000252899 -0.000415053 -0.000840748 -0.000892747 -0.000757958 -0.000343117 -0.00010299 -8.56893e-05 0.000139946 7.30956e-05 -7.40279e-05 0.000226563 0.000286104 0.000245892 0.000603605 0.000651262 0.000250741 4.99665e-05 8.49775e-05 6.33793e-05 -9.5479e-05 -0.000179976 -1.83744e-05 -7.72949e-05 -0.000446897 -0.000527956 -0.000588725 -0.000391326 0.000528765 0.00098422 0.00101799 0.00120743 0.000884322 0.000400386 -6.60536e-05 -0.000812428 -0.00152208 -0.0021549 -0.00196901 -0.000772224 0.000182261 0.000883676 0.00137269 0.000943509 -7.92833e-05 -0.000809257 -0.000831144 -0.000697496 -0.00049405 -2.06417e-05 0.000221826 0.000424966 0.000471413;
#X coords 0 1 100 -1 200 70 1 0 0;
#X restore 9 283 graph;
#X obj 10 197 r~ \$0-audio;
#X obj 18 221 r \$0-metro;
#X obj 328 116 adc~;
#X msg 328 77 \; pd dsp \$1;
#X obj 328 57 tgl 15 0 empty empty DSP 17 7 0 10 #ffffff #000000 #000000 0 1;
#X obj 328 141 s~ \$0-audio;
#X obj 249 77 metro 100;
#X obj 249 57 tgl 15 0 empty empty FrameRate 17 7 0 10 #ffffff #000000 #000000 0 1;
#X obj 249 101 s \$0-metro;
#X text 11 39 MAI;
#X text 10 56 Sonar+D;
#X obj 543 190 list prepend;
#X obj 624 79 vradio 15 1 0 4 empty empty Category 18 7 0 10 #feffc6 #000000 #000000 0;
#X obj 543 166 r \$0-mfcc;
#X obj 624 144 s \$0-category;
#X obj 624 166 r \$0-category;
#X msg 624 56 0;
#X obj 624 32 loadbang;
#X obj 543 214 s \$0-data;
#X obj 543 237 r \$0-data;
#X obj 58 490 list length;
#X floatatom 58 513 5 0 0 1 $mfcc - - 0;
#X obj 10 437 mfcc~ 1024 250;
#X obj 613 241 tgl 15 0 empty empty Rec\ category 18 7 0 10 #feffc6 #000000 #000000 0 1;
#X obj 544 427 r \$0-mfcc;
#X obj 614 431 tgl 15 0 empty empty Play 18 7 0 10 #feffc6 #000000 #000000 0 1;
#X obj 544 357 bng 15 250 50 0 empty empty Train\ model 18 7 0 10 #feffc6 #000000 #000000;
#X msg 544 376 train;
#X obj 543 262 spigot;
#X msg 543 307 add \$1 \$2 \$3 \$4 \$5 \$6 \$7 \$8 \$9 \$10 \$11 \$12 \$13 %14;
#X obj 544 451 spigot;
#X msg 544 475 map \$1 \$2 \$3 \$4 \$5 \$6 \$7 \$8 \$9 \$10 \$11 \$12 \$13;
#X obj 544 525 bng 15 250 50 0 empty empty Clear\ data 18 7 0 10 #ffc7c6 #000000 #000000;
#X msg 544 545 clear;
#X obj 551 569 s \$0-clear;
#X obj 915 213 route 0 1 2 3;
#X obj 922 307 f 0;
#X obj 950 307 + 1;
#X obj 922 284 bng 19 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X msg 949 285 0;
#X obj 923 261 t b b;
#X obj 923 238 r \$0-clear;
#X obj 1002 307 f 0;
#X obj 1031 307 + 1;
#X obj 1002 284 bng 19 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X msg 1030 285 0;
#X obj 1001 261 t b b;
#X obj 1001 238 r \$0-clear;
#X obj 1079 307 f 0;
#X obj 1107 307 + 1;
#X obj 1079 284 bng 19 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X msg 1106 285 0;
#X obj 1079 261 t b b;
#X obj 1079 238 r \$0-clear;
#X obj 1157 307 f 0;
#X obj 1185 307 + 1;
#X obj 1157 284 bng 19 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X msg 1184 285 0;
#X obj 1157 261 t b b;
#X obj 1157 238 r \$0-clear;
#X obj 543 332 s \$0-toANN;
#X obj 249 168 r \$0-toANN;
#X obj 544 400 s \$0-toANN;
#X obj 544 592 s \$0-toANN;
#X obj 544 499 s \$0-toANN;
#X obj 549 284 s \$0-toCounter;
#X obj 915 189 r \$0-toCounter;
#X obj 914 82 s \$0-toANN;
#X obj 914 38 bng 15 250 50 0 empty empty Write 18 7 0 10 #feffc6 #000000 #000000;
#X obj 915 106 bng 15 250 50 0 empty empty Read 18 7 0 10 #feffc6 #000000 #000000;
#X obj 915 149 s \$0-toANN;
#X obj 243 534 s \$0-toANN;
#X obj 249 235 loadbang;
#X msg 375 328 probs 1;
#X msg 359 351 num_outputs 1;
#X msg 280 464 input_activation_function 1;
#X msg 264 487 hidden_activation_function 1;
#X msg 249 510 output_activation_function 1;
#X obj 694 591 s \$0-toANN;
#X msg 694 567 null_rejection_coeff \$1;
#X obj 697 522 hsl 162 15 0 100 0 0 empty empty sensitivity -2 -10 0 10 #feffc6 #000000 #000000 0 1;
#X obj 694 543 / 100;
#X floatatom 739 543 5 0 0 0 - - - 0;
#X msg 312 417 min_change 1e-06;
#X msg 391 305 mode 0;
#X msg 407 282 num_hidden 4;
#X msg 328 395 training_rate 1;
#X obj 290 214 s \$0-outProbs;
#X obj 915 370 r \$0-outProbs;
#X floatatom 249 215 5 0 0 0 - - - 0;
#X obj 915 394 route probs;
#X obj 915 419 unpack f f f f f f f f;
#X obj 967 530 line;
#X msg 914 530 \$1 200;
#X obj 16 161 timbreID;
#X obj 249 258 t b b b b b b b b b b b;
#X text 11 23 16/06/2023;
#X obj 922 331 nbx 4 17 -1e+37 1e+37 0 0 empty empty empty 0 -10 0 12 #c6ffc7 #000000 #000000 0 256;
#X obj 1002 331 nbx 4 17 -1e+37 1e+37 0 0 empty empty empty 0 -10 0 12 #c6ffc7 #000000 #000000 0 256;
#X obj 1079 331 nbx 4 17 -1e+37 1e+37 0 0 empty empty empty 0 -10 0 12 #c6ffc7 #000000 #000000 0 256;
#X obj 1156 331 nbx 4 17 -1e+37 1e+37 0 0 empty empty empty 0 -10 0 12 #c6ffc7 #000000 #000000 0 256;
#X obj 965 264 bng 15 250 50 0 empty empty empty 17 7 0 10 #ffc7c6 #000000 #000000;
#X obj 1043 264 bng 15 250 50 0 empty empty empty 17 7 0 10 #ffc7c6 #000000 #000000;
#X obj 1121 265 bng 15 250 50 0 empty empty empty 17 7 0 10 #ffc7c6 #000000 #000000;
#X obj 1199 265 bng 15 250 50 0 empty empty empty 17 7 0 10 #ffc7c6 #000000 #000000;
#X obj 249 13 tgl 15 0 empty empty Audio\ on/off 18 7 0 10 #feffc6 #000000 #000000 0 1;
#X obj 249 33 t b b;
#X msg 343 373 scaling 0;
#X obj 146 432 vu 15 120 empty empty -1 -10 0 10 #404040 #000000 1 0;
#X obj 145 407 - 96;
#X obj 145 384 env~;
#X obj 313 239 bng 15 250 50 0 empty empty Clear\ ANN\ config 18 7 0 10 #ffc7c6 #000000 #000000;
#X msg 296 440 max_iterations 100;
#X obj 1080 509 nbx 5 17 -1e+37 1e+37 0 0 empty empty empty 0 -10 0 12 #c6ffc7 #000000 #000000 0 256;
#X obj 1080 443 + 6;
#X obj 1109 443 / 10;
#X obj 1080 465 max 0;
#X obj 1121 465 min 1;
#X obj 1080 487 * 127;
#X obj 1163 509 nbx 5 17 -1e+37 1e+37 0 0 empty empty empty 0 -10 0 12 #c6ffc7 #000000 #000000 0 256;
#X obj 1163 443 + 6;
#X obj 1192 443 / 10;
#X obj 1163 465 max 0;
#X obj 1204 465 min 1;
#X obj 1163 487 * 127;
#X obj 914 509 nbx 5 17 -1e+37 1e+37 0 0 empty empty empty 0 -10 0 12 #c6ffc7 #000000 #000000 0 256;
#X obj 914 443 + 6;
#X obj 943 443 / 10;
#X obj 914 465 max 0;
#X obj 955 465 min 1;
#X obj 914 487 * 127;
#X obj 997 509 nbx 5 17 -1e+37 1e+37 0 0 empty empty empty 0 -10 0 12 #c6ffc7 #000000 #000000 0 256;
#X obj 997 443 + 6;
#X obj 1026 443 / 10;
#X obj 997 465 max 0;
#X obj 1038 465 min 1;
#X obj 997 487 * 127;
#X obj 1024 534 hsl 162 15 0 127 0 0 empty empty #1 -20 7 0 10 #c6ffc7 #000000 #000000 0 1;
#X obj 967 552 line;
#X msg 914 552 \$1 200;
#X obj 1024 556 hsl 162 15 0 127 0 0 empty empty #2 -20 7 0 10 #c6ffc7 #000000 #000000 0 1;
#X obj 967 574 line;
#X msg 914 574 \$1 200;
#X obj 1024 578 hsl 162 15 0 127 0 0 empty empty #3 -20 7 0 10 #c6ffc7 #000000 #000000 0 1;
#X obj 967 596 line;
#X msg 914 596 \$1 200;
#X obj 1024 600 hsl 162 15 0 127 0 0 empty empty #4 -20 7 0 10 #c6ffc7 #000000 #000000 0 1;
#X msg 914 58 write /Users/enric/Desktop/MAI_supervised;
#X msg 915 126 read /Users/enric/Desktop/MAI_supervised;
#X text 238 614 TODO: - Send out via MIDI/OSC;
#X connect 0 0 101 0;
#X connect 0 1 99 0;
#X connect 2 0 34 0;
#X connect 2 0 122 0;
#X connect 3 0 34 0;
#X connect 5 1 6 0;
#X connect 5 1 32 0;
#X connect 12 0 10 0;
#X connect 13 0 10 0;
#X connect 14 0 17 0;
#X connect 16 0 15 0;
#X connect 18 0 20 0;
#X connect 19 0 18 0;
#X connect 23 0 30 0;
#X connect 24 0 26 0;
#X connect 25 0 23 0;
#X connect 27 0 23 1;
#X connect 28 0 24 0;
#X connect 29 0 28 0;
#X connect 31 0 40 0;
#X connect 32 0 33 0;
#X connect 34 0 5 0;
#X connect 35 0 40 1;
#X connect 36 0 42 0;
#X connect 37 0 42 1;
#X connect 38 0 39 0;
#X connect 39 0 74 0;
#X connect 40 0 41 0;
#X connect 40 0 77 0;
#X connect 41 0 72 0;
#X connect 42 0 43 0;
#X connect 43 0 76 0;
#X connect 44 0 45 0;
#X connect 45 0 46 0;
#X connect 45 0 75 0;
#X connect 47 0 50 0;
#X connect 47 1 56 0;
#X connect 47 2 62 0;
#X connect 47 3 68 0;
#X connect 48 0 49 0;
#X connect 48 0 109 0;
#X connect 49 0 48 1;
#X connect 50 0 48 0;
#X connect 51 0 48 1;
#X connect 52 0 50 0;
#X connect 52 1 51 0;
#X connect 53 0 52 0;
#X connect 54 0 55 0;
#X connect 54 0 110 0;
#X connect 55 0 54 1;
#X connect 56 0 54 0;
#X connect 57 0 54 1;
#X connect 58 0 56 0;
#X connect 58 1 57 0;
#X connect 59 0 58 0;
#X connect 60 0 61 0;
#X connect 60 0 111 0;
#X connect 61 0 60 1;
#X connect 62 0 60 0;
#X connect 63 0 60 1;
#X connect 64 0 62 0;
#X connect 64 1 63 0;
#X connect 65 0 64 0;
#X connect 66 0 67 0;
#X connect 66 0 112 0;
#X connect 67 0 66 1;
#X connect 68 0 66 0;
#X connect 69 0 66 1;
#X connect 70 0 68 0;
#X connect 70 1 69 0;
#X connect 71 0 70 0;
#X connect 73 0 0 0;
#X connect 78 0 47 0;
#X connect 80 0 159 0;
#X connect 81 0 160 0;
#X connect 84 0 107 0;
#X connect 85 0 83 0;
#X connect 86 0 83 0;
#X connect 87 0 83 0;
#X connect 88 0 83 0;
#X connect 89 0 83 0;
#X connect 91 0 90 0;
#X connect 92 0 93 0;
#X connect 93 0 91 0;
#X connect 93 0 94 0;
#X connect 95 0 83 0;
#X connect 96 0 83 0;
#X connect 97 0 83 0;
#X connect 98 0 83 0;
#X connect 100 0 102 0;
#X connect 102 0 103 0;
#X connect 103 1 138 0;
#X connect 103 3 144 0;
#X connect 103 5 126 0;
#X connect 103 7 132 0;
#X connect 104 0 149 0;
#X connect 105 0 104 0;
#X connect 107 0 89 0;
#X connect 107 1 88 0;
#X connect 107 2 87 0;
#X connect 107 3 124 0;
#X connect 107 4 95 0;
#X connect 107 5 98 0;
#X connect 107 6 119 0;
#X connect 107 7 86 0;
#X connect 107 8 85 0;
#X connect 107 9 96 0;
#X connect 107 10 97 0;
#X connect 113 0 52 0;
#X connect 114 0 58 0;
#X connect 115 0 64 0;
#X connect 116 0 70 0;
#X connect 117 0 118 0;
#X connect 118 0 19 0;
#X connect 118 1 16 0;
#X connect 119 0 83 0;
#X connect 121 0 120 0;
#X connect 122 0 121 0;
#X connect 123 0 107 0;
#X connect 124 0 83 0;
#X connect 125 0 154 0;
#X connect 126 0 127 0;
#X connect 127 0 128 0;
#X connect 128 0 129 0;
#X connect 128 0 130 0;
#X connect 130 0 125 0;
#X connect 131 0 157 0;
#X connect 132 0 133 0;
#X connect 133 0 134 0;
#X connect 134 0 135 0;
#X connect 134 0 136 0;
#X connect 136 0 131 0;
#X connect 137 0 105 0;
#X connect 138 0 139 0;
#X connect 139 0 140 0;
#X connect 140 0 141 0;
#X connect 140 0 142 0;
#X connect 142 0 137 0;
#X connect 143 0 151 0;
#X connect 144 0 145 0;
#X connect 145 0 146 0;
#X connect 146 0 147 0;
#X connect 146 0 148 0;
#X connect 148 0 143 0;
#X connect 150 0 152 0;
#X connect 151 0 150 0;
#X connect 153 0 155 0;
#X connect 154 0 153 0;
#X connect 156 0 158 0;
#X connect 157 0 156 0;
#X connect 159 0 79 0;
#X connect 160 0 82 0;
